@model StatsPortal.Models.SnippetViewModel

@{
    ViewBag.Title = "Snippet";
}

@Scripts.Render("~/bundles/snippets")


<head>
    <link rel="stylesheet" type="text/css" href="~/Content/snippets.css">
</head>

<br />

<!-- Toolbar -->
<button id="toggle_snippet_nav" class="btn btn-sm"><span id="toggle_icon"> <span class="glyphicon glyphicon-menu-down padding-right-5"></span><span class="glyphicon glyphicon-cog"></span></span></button>

<div class="dropdown col-md-2 popped" id="snippet_nav_wrapper">


    <div id="snippet_nav">
        <div id="toggle_snippet_in_menu"><span class="glyphicon glyphicon-menu-up padding-right-5"></span></div>
        
        <div id="row">
            <select class="form-control" id="snippet_keyword_bar_chart_dropdown"></select>
        </div>
 
        

        @*<div id="domains_auto_widget">
            <label for="snippet_keyword_bar_chart_dropdown">Domain: </label>
            <input id="snippet_keyword_bar_chart_dropdown" class="form-control" value="Google" />
        </div>*@
        
        <br />

        <div class="row top-margin-small">
            
            Start Date:
            <input type="text" class="datepicker form-control" id="start_date" />
            
            <br />
            
            End Date:
            <input type="text" class="datepicker form-control" id="end_date" />
            
            <br />
            <div class="col-md-12" id="populate_wrapper">
                <button type="button" class="btn btn-primary" id="snippet_populate_button">Populate</button>
            </div>

        </div>

        <br />

    </div>
</div>


<!-- Summary Line Chart -->
<div class="col-md-12">
    <div class="panel panel-default">
        @*<h4>Total Counts: <span class="domain_name"></span></h4>*@
        @*<div class="radio" id="keyword_counts_container_domain">
                <label><input type="radio" name="optradio" id="keyword_raw_counts_domain" checked="checked">Raw Counts</label>

                <label><input type="radio" name="optradio" id="keyword_percentages_domain">Percent Parsed</label>
            </div>*@
        <div id="snippet_line_chart"></div>
    </div>
</div>


<!-- Keyword Bar Chart -->
<div class="col-md-12" id="keyword_container">
    <div class="panel panel-default" id="keyword_data_panel">

        <div class="radio" id="keyword_data_toggle_container">
            <label><input type="radio" name="optradio_keyword_data_display" id="keyword_data_raw_counts" checked="checked">Raw Counts</label>

            <label><input type="radio" name="optradio_keyword_data_display" id="keyword_data_percentages">Percent Parsed</label>
        </div>
        <div class="col-md-12" id="keyword_form_container">
            <select class="form-control" id="snippet_keyword_data_dropdown"></select>
        </div>

        <br />
        <br />

        <div id="keyword_data_bar"></div>

        <div class="text_center" id="keyword_bar_line_toggle">
            <div class="col col-md-12 radio">
                <label><input type="radio" name="optradio_keyword_data_chart" id="toggle_keyword_bar">Bar View</label>

                <label><input type="radio" name="optradio_keyword_data_chart" id="toggle_keyword_line" checked="checked">Line View</label>
                @*<button id="toggle_keyword_bar" class="btn btn-sm clicked">Bar View</button>
                    <button id="toggle_keyword_line" class="btn btn-sm">Line View</button>*@
            </div>
        </div>

        <br />
        <br />
        <br />
        <br />

        <div class="col col-md-12" id="keyword_chart_toggle_wrapper">
            <button id="toggle_keyword_chart" class="btn btn-sm">View as Table</button>
        </div>

        <!-- Keyword Table View -->
        <table class="table" id="keyword_table"></table>
    </div>
</div>


<!-- Keyword Line Chart -->
<div class="col-md-12">
    <div class="panel panel-default">

        <div class="radio" id="keyword_counts_container">
            <label><input type="radio" name="optradio" id="keyword_raw_counts" checked="checked">Raw Counts</label>

            <label><input type="radio" name="optradio" id="keyword_percentages">Percent Parsed</label>
        </div>

        <div id="snippet_keyword_line_chart"></div>

        <div id="keyword_toolbar_wrapper">

            <div id="keyword_line_toggle">

                <div id="keyword_toolbar_container">

                    <div id="snippet_keyword_list"></div>
                    <br />

                    <input placeholder="Filter keywords" id="keyword_filter_box" type="text" />
                    
                    <br /><br />

                    <button type="button" class="btn btn-default btn-xs" id="snippet_keyword_checkall_button">Select All</button>
                    <button type="button" class="btn btn-default btn-xs" id="snippet_keyword_uncheckall_button">Disselect All</button>

                </div>

                <button id="toggle_keyword_line_nav" class="btn btn-sm"><span id="toggle_icon"><span class="glyphicon glyphicon-cog"></span></span></button>
               
            </div>
        </div>
    </div>
</div>




<hr />

<script type="text/javascript">


    var dataValues = @Html.Raw(Json.Encode(Model.SnippetStats));
    var startTimeValue = @Model.startDate;
    var endTimeValue = @Model.endDate;
    var maxTimeValue = @Model.maxDate;
    var minTimeValue = @Model.minDate;
    var domainNameList = @Html.Raw(Json.Encode(Model.domainList));
    
    //var snippetCounts = dataValues.SnippetStats;

    

    //google.load("visualization", "1", {packages:["line"]});
    //google.setOnLoadCallback(drawSnippetLineChart());

    //google.load('visualization', '1.1', {packages: ['line']});
    //google.setOnLoadCallback(drawKeywordLine(dataValues));

    //google.load("visualization", "1", {packages:["corechart"]});
    //google.setOnLoadCallback(drawSnippetCombo);

    //google.load("visualization", "1", {packages:["corechart"]});


    //google.setOnLoadCallback(drawSnippetKeywordBar(dataValues));

    //google.load("visualization", "1", {packages:["corechart"]});
    //google.setOnLoadCallback(drawSnippetKeywordBarPercent(dataValues));

    //alert(dataValues);

    //google.load("visualization", "1", { packages: ["geochart"] });
    //google.setOnLoadCallback(drawRegionsMap);

    $(window).resize(function () {
        reloadGraphs();
    });


</script>
